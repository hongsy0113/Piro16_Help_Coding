{% extends 'group_base.html' %}
{% block title %}그룹 상세 페이지{% endblock %}

{% block content %}
{{ request.user.id|json_script:"user_id" }}
{{ group.id|json_script:"group_id" }}

    <div class="group-info">
        <div class="group-info__nav">
            <div class="group-info__name">
                <h2 class="d-flex flex-row">
                    {{ group.name }}
                    <div class="group-star">
                        <button class="star group__keyword-star group__keyword-star--{{ group.id }}" id="keyword-star-{{ group.id }}">  
                            {% if group.is_star %} <!-- 꽉 찬 별 -->
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18.26l-7.053 3.948 1.575-7.928L.587 8.792l8.027-.952L12 .5l3.386 7.34 8.027.952-5.935 5.488 1.575 7.928z"/></svg>                            
                            {% else %} <!-- 빈 별 -->
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18.26l-7.053 3.948 1.575-7.928L.587 8.792l8.027-.952L12 .5l3.386 7.34 8.027.952-5.935 5.488 1.575 7.928L12 18.26zm0-2.292l4.247 2.377-.949-4.773 3.573-3.305-4.833-.573L12 5.275l-2.038 4.42-4.833.572 3.573 3.305-.949 4.773L12 15.968z"/></svg>                            
                            {% endif %}
                        </button>
                    </div>
                </h2>
            </div>
            <a href="{% url 'group:group_home' %}">그룹 홈</a>
            <a href="#">그룹 커뮤니티</a>
            {% if group.mode == 'PRIVATE' %}
            <a href="{% url 'group:create_code' group.pk %}">친구 초대하기</a>
            {% endif %}
            {% if group.mode == 'PUBLIC' %}
                {% if maker == user %}
                <a href="{% url 'group:join_list' group.pk %}">그룹 가입신청 관리</a>
                {% endif %}
            {% endif %}
            <!-- <div class="group__code--alert-box" id="create-code">
                Alert 친구초대 
                <div class="code_box">
                    <h3>그룹명: {{ group.name }}</h3>
                    <h3>다음 코드로 친구를 초대하세요!</h3>
                    <h1>{{ group.code }}</h1>
                </div>
                <a href="{% url 'group:group_home' %}">홈으로</a>
                <button class="group__code--close btn btn-dark" onclick="closeCode()">닫기</button>
            </div>
            <button class="group__code--btn btn btn-dark" onclick="createCode()">친구 초대하기</button> -->
        </div>
        <div class="group-info__main">
            <div class="group-info__image">
                {% if group.image %}
                <img src="{{ group.image.url }}" height="200" width="200" />
                {% else %}
                <img src="{{ ani_image }}" height="200" width="200" />
                {% endif %}
            </div>
            <div>{{ group.intro }}</div>
        </div>
        <div class="group-info__member">
            <h3>멤버 명단</h3>
            <div class="d-flex flex-row align-items-center">
                {% if maker.img %}
                <img src="{{ maker.img.url }}" height="50" width="50" style="border-radius: 50px;"/>
                {% else %}
                <img src="{{ profile_img }}" height="50" width="50" style="border-radius: 50px;"/>
                {% endif %}
                <h6>{{ maker }} [방장] </h6>
            </div>
            {% for member in members %}
                {% if member != maker %}
                    <div class="d-flex flex-row align-items-center">
                        {% if member.img %}
                        <img src="{{ member.img.url }}" height="50" width="50" style="border-radius: 50px;"/>
                        {% else %}
                        <img src="{{ profile_img }}" height="50" width="50" style="border-radius: 50px;"/>
                        {% endif %}
                        <h6>{{ member }}</h6>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <div class="group-info__input">
            <a href="{% url 'group:group_delete' group.pk %}" class="delete_btn">삭제</a>
            <a href="{% url 'group:group_home' %}" class="list_btn">목록</a>
            <a href="{% url 'group:group_update' group.pk %}" class="update_btn">수정</a>
            <a href="{% url 'group:group_drop' group.pk %}">그룹 탈퇴하기</a>
            {% if group.mode == 'PUBLIC' %}
                {% if maker != user %}
                <a href="{% url 'group:public_group_join' group.pk %}">그룹 가입하기[공개그룹]</a>
                {% endif %}
            {% endif %}
        </div>
    </div>

{% endblock %}